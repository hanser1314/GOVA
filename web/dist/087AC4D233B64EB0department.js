/*! 
 Build based on gin-vue-admin 
 Time : 1700123686000 */
import{a as e,r as a,x as l,o as t,c as r,b as o,d,w as i,g as n,q as s,t as u,y as p,V as m,k as c,L as v,E as g,l as f}from"./087AC4D233B64EB0index.js";import{E as C,a as B,b}from"./087AC4D233B64EB0date-picker.js";import{E as A}from"./087AC4D233B64EB0dialog.js";import"./087AC4D233B64EB0overlay.js";import{E as y}from"./087AC4D233B64EB0scrollbar.js";/* empty css                     */import{E}from"./087AC4D233B64EB0pagination.js";import"./087AC4D233B64EB0tag.js";import"./087AC4D233B64EB0select.js";/* empty css                      */import{E as D,a as h}from"./087AC4D233B64EB0table-column.js";import"./087AC4D233B64EB0checkbox.js";/* empty css                       */import{E as _}from"./087AC4D233B64EB0popover.js";import{a as j,E as w}from"./087AC4D233B64EB0form-item.js";/* empty css                      *//* empty css                     */import{g as k,d as V,f as x,a as T,c as I,u as U}from"./087AC4D233B64EB0department2.js";import{f as z}from"./087AC4D233B64EB0format.js";import{E as S}from"./087AC4D233B64EB0index21.js";import"./087AC4D233B64EB0arrays.js";import"./087AC4D233B64EB0index23.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0isUndefined.js";import"./087AC4D233B64EB0hasIn.js";import"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0dropdown.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0date.js";import"./087AC4D233B64EB0dictionary.js";import"./087AC4D233B64EB0sysDictionary2.js";const q={class:"gva-search-box"},F={class:"gva-table-box"},K={class:"gva-btn-list"},O=o("p",null,"确定要删除吗？",-1),R={style:{"text-align":"right","margin-top":"8px"}},L={class:"gva-pagination"},Q={class:"dialog-footer"},G=Object.assign({name:"Department"},{__name:"department",setup(G){const H=e({dno:"",dname:"",dmanagerno:""}),J=a({dno:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],dname:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}],dmanagerno:[{required:!0,message:"",trigger:["input","blur"]},{whitespace:!0,message:"不能只输入空格",trigger:["input","blur"]}]}),M=a({createdAt:[{validator:(e,a,l)=>{$.value.startCreatedAt&&!$.value.endCreatedAt?l(new Error("请填写结束日期")):!$.value.startCreatedAt&&$.value.endCreatedAt?l(new Error("请填写开始日期")):$.value.startCreatedAt&&$.value.endCreatedAt&&($.value.startCreatedAt.getTime()===$.value.endCreatedAt.getTime()||$.value.startCreatedAt.getTime()>$.value.endCreatedAt.getTime())?l(new Error("开始日期应当早于结束日期")):l()},trigger:"change"}]}),N=e(),P=e(),W=e(1),X=e(0),Y=e(10),Z=e([]),$=e({}),ee=({prop:e,order:a})=>{$.value.sort=e,$.value.order=a,oe()},ae=()=>{$.value={},oe()},le=()=>{var e;null==(e=P.value)||e.validate((async e=>{e&&(W.value=1,Y.value=10,oe())}))},te=e=>{Y.value=e,oe()},re=e=>{W.value=e,oe()},oe=async()=>{const e=await k({page:W.value,pageSize:Y.value,...$.value});0===e.code&&(Z.value=e.data.list,X.value=e.data.total,W.value=e.data.page,Y.value=e.data.pageSize)};oe();(async()=>{})();const de=e([]),ie=e=>{de.value=e},ne=e(!1),se=async()=>{const e=[];if(0===de.value.length)return void c({type:"warning",message:"请选择要删除的数据"});de.value&&de.value.map((a=>{e.push(a.ID)}));0===(await V({ids:e})).code&&(c({type:"success",message:"删除成功"}),Z.value.length===e.length&&W.value>1&&W.value--,ne.value=!1,oe())},ue=e(""),pe=async e=>{0===(await T({ID:e.ID})).code&&(c({type:"success",message:"删除成功"}),1===Z.value.length&&W.value>1&&W.value--,oe())},me=e(!1),ce=e(!1),ve=async e=>{const a=await x({ID:e.ID});0===a.code&&(H.value=a.data.redepartment,ce.value=!0)},ge=()=>{ce.value=!1,H.value={dno:"",dname:"",dmanagerno:""}},fe=()=>{ue.value="create",me.value=!0},Ce=()=>{me.value=!1,H.value={dno:"",dname:"",dmanagerno:""}},Be=async()=>{var e;null==(e=N.value)||e.validate((async e=>{if(!e)return;let a;switch(ue.value){case"create":default:a=await I(H.value);break;case"update":a=await U(H.value)}0===a.code&&(c({type:"success",message:"创建/更改成功"}),Ce(),oe())}))};return(e,a)=>{const c=l("QuestionFilled"),k=v,V=S,T=C,I=j,U=g,G=w,oe=_,be=D,Ae=l("InfoFilled"),ye=h,Ee=E,De=f,he=y,_e=A,je=B,we=b;return t(),r("div",null,[o("div",q,[d(G,{ref_key:"elSearchFormRef",ref:P,inline:!0,model:$.value,class:"demo-form-inline",rules:M,onKeyup:s(le,["enter"])},{default:i((()=>[d(I,{label:"创建日期",prop:"createdAt"},{label:i((()=>[o("span",null,[n(" 创建日期 "),d(V,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:i((()=>[d(k,null,{default:i((()=>[d(c)])),_:1})])),_:1})])])),default:i((()=>[d(T,{modelValue:$.value.startCreatedAt,"onUpdate:modelValue":a[0]||(a[0]=e=>$.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!$.value.endCreatedAt&&e.getTime()>$.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),n(" — "),d(T,{modelValue:$.value.endCreatedAt,"onUpdate:modelValue":a[1]||(a[1]=e=>$.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!$.value.startCreatedAt&&e.getTime()<$.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),d(I,null,{default:i((()=>[d(U,{type:"primary",icon:"search",onClick:le},{default:i((()=>[n("查询")])),_:1}),d(U,{icon:"refresh",onClick:ae},{default:i((()=>[n("重置")])),_:1})])),_:1})])),_:1},8,["model","rules","onKeyup"])]),o("div",F,[o("div",K,[d(U,{type:"primary",icon:"plus",onClick:fe},{default:i((()=>[n("新增")])),_:1}),d(oe,{visible:ne.value,"onUpdate:visible":a[4]||(a[4]=e=>ne.value=e),disabled:!de.value.length,placement:"top",width:"160"},{reference:i((()=>[d(U,{icon:"delete",style:{"margin-left":"10px"},disabled:!de.value.length,onClick:a[3]||(a[3]=e=>ne.value=!0)},{default:i((()=>[n("删除")])),_:1},8,["disabled"])])),default:i((()=>[O,o("div",R,[d(U,{type:"primary",link:"",onClick:a[2]||(a[2]=e=>ne.value=!1)},{default:i((()=>[n("取消")])),_:1}),d(U,{type:"primary",onClick:se},{default:i((()=>[n("确定")])),_:1})])])),_:1},8,["visible","disabled"])]),d(ye,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:Z.value,"row-key":"ID",onSelectionChange:ie,onSortChange:ee},{default:i((()=>[d(be,{type:"selection",width:"55"}),d(be,{align:"left",label:"日期",width:"180"},{default:i((e=>[n(u(p(z)(e.row.CreatedAt)),1)])),_:1}),d(be,{sortable:"",align:"left",label:"系编号",prop:"dno",width:"120"}),d(be,{align:"left",label:"系名",prop:"dname",width:"120"}),d(be,{align:"left",label:"系主任",prop:"dmanagerno",width:"120"}),d(be,{align:"left",label:"操作"},{default:i((e=>[d(U,{type:"primary",link:"",class:"table-button",onClick:a=>ve(e.row)},{default:i((()=>[d(k,{style:{"margin-right":"5px"}},{default:i((()=>[d(Ae)])),_:1}),n(" 查看详情 ")])),_:2},1032,["onClick"]),d(U,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await x({ID:e.ID});ue.value="update",0===a.code&&(H.value=a.data.redepartment,me.value=!0)})(e.row)},{default:i((()=>[n("变更")])),_:2},1032,["onClick"]),d(U,{type:"primary",link:"",icon:"delete",onClick:a=>{return l=e.row,void m.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{pe(l)}));var l}},{default:i((()=>[n("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),o("div",L,[d(Ee,{layout:"total, sizes, prev, pager, next, jumper","current-page":W.value,"page-size":Y.value,"page-sizes":[10,30,50,100],total:X.value,onCurrentChange:re,onSizeChange:te},null,8,["current-page","page-size","total"])])]),d(_e,{modelValue:me.value,"onUpdate:modelValue":a[8]||(a[8]=e=>me.value=e),"before-close":Ce,title:"create"===ue.value?"添加":"修改","destroy-on-close":""},{footer:i((()=>[o("div",Q,[d(U,{onClick:Ce},{default:i((()=>[n("取 消")])),_:1}),d(U,{type:"primary",onClick:Be},{default:i((()=>[n("确 定")])),_:1})])])),default:i((()=>[d(he,{height:"500px"},{default:i((()=>[d(G,{model:H.value,"label-position":"right",ref_key:"elFormRef",ref:N,rules:J,"label-width":"80px"},{default:i((()=>[d(I,{label:"系编号:",prop:"dno"},{default:i((()=>[d(De,{modelValue:H.value.dno,"onUpdate:modelValue":a[5]||(a[5]=e=>H.value.dno=e),clearable:!0,placeholder:"请输入系编号"},null,8,["modelValue"])])),_:1}),d(I,{label:"系名:",prop:"dname"},{default:i((()=>[d(De,{modelValue:H.value.dname,"onUpdate:modelValue":a[6]||(a[6]=e=>H.value.dname=e),clearable:!0,placeholder:"请输入系名"},null,8,["modelValue"])])),_:1}),d(I,{label:"系主任:",prop:"dmanagerno"},{default:i((()=>[d(De,{modelValue:H.value.dmanagerno,"onUpdate:modelValue":a[7]||(a[7]=e=>H.value.dmanagerno=e),clearable:!0,placeholder:"请输入系主任"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1},8,["modelValue","title"]),d(_e,{modelValue:ce.value,"onUpdate:modelValue":a[9]||(a[9]=e=>ce.value=e),style:{width:"800px"},"lock-scroll":"","before-close":ge,title:"查看详情","destroy-on-close":""},{default:i((()=>[d(he,{height:"550px"},{default:i((()=>[d(we,{column:"1",border:""},{default:i((()=>[d(je,{label:"系编号"},{default:i((()=>[n(u(H.value.dno),1)])),_:1}),d(je,{label:"系名"},{default:i((()=>[n(u(H.value.dname),1)])),_:1}),d(je,{label:"系主任"},{default:i((()=>[n(u(H.value.dmanagerno),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}});export{G as default};
