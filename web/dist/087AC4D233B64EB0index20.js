/*! 
 Build based on gin-vue-admin 
 Time : 1700123686000 */
import{u as a,a as e,r as t,m as s,x as l,o,c as i,b as r,t as n,d as c,w as p,h as d,z as u,e as m,g,q as _,f,s as h,k as v,L as B,l as y,E as k,p as C,i as E}from"./087AC4D233B64EB0index.js";import{a as w,E as b}from"./087AC4D233B64EB0form-item.js";import{E as A}from"./087AC4D233B64EB0switch.js";/* empty css                      *//* empty css                     *//* empty css                     */import{_ as j}from"./087AC4D233B64EB0logo.js";import{_ as D,a as V,b as I,c as x}from"./087AC4D233B64EB0video.js";import{c as L}from"./087AC4D233B64EB0initdb.js";import U from"./087AC4D233B64EB0bottomInfo.js";import{_ as q}from"./087AC4D233B64EB0_plugin-vue_export-helper.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0_initCloneObject.js";const N=a=>(C("data-v-9e73626c"),a=a(),E(),a),z={id:"userLayout"},P={class:"login_panel"},K={class:"login_panel_form"},O={class:"login_panel_form_title"},F=N((()=>r("img",{class:"login_panel_form_title_logo",src:j,alt:""},null,-1))),G={class:"login_panel_form_title_p"},M={class:"input-icon"},R={class:"input-icon"},$={class:"vPicBox"},H={class:"vPic"},J=["src"],Q={key:0},S={key:1},T=N((()=>r("div",{class:"login_panel_right"},null,-1))),W={class:"login_panel_foot"},X=f('<div class="links" data-v-9e73626c><a href="http://doc.henrongyi.top/" target="_blank" data-v-9e73626c><img src="'+D+'" class="link-icon" data-v-9e73626c></a><a href="https://support.qq.com/product/371961" target="_blank" data-v-9e73626c><img src="'+V+'" class="link-icon" data-v-9e73626c></a><a href="https://github.com/flipped-aurora/gin-vue-admin" target="_blank" data-v-9e73626c><img src="'+I+'" class="link-icon" data-v-9e73626c></a><a href="https://space.bilibili.com/322210472" target="_blank" data-v-9e73626c><img src="'+x+'" class="link-icon" data-v-9e73626c></a></div>',1),Y={class:"copyright"},Z={name:"Login"},aa=q(Object.assign(Z,{setup(f){const C=a(),E=()=>{h({}).then((a=>{N.captcha[1].max=a.data.captchaLength,N.captcha[1].min=a.data.captchaLength,I.value=a.data.picPath,x.captchaId=a.data.captchaId}))};E();const j=e("lock"),D=()=>{j.value="lock"===j.value?"unlock":"lock"},V=e(null),I=e(""),x=t({username:"admin",password:"123456",captcha:"",captchaId:""}),q=t({status:!1}),N=t({username:[{validator:(a,e,t)=>{if(e.length<5)return t(new Error("请输入正确的用户名"));t()},trigger:"blur"}],password:[{validator:(a,e,t)=>{if(e.length<6)return t(new Error("请输入正确的密码"));t()},trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"},{message:"验证码格式不正确",trigger:"blur"}]}),Z=s(),aa=()=>{V.value.validate((async a=>{if(!a)return v({type:"error",message:"请正确填写登录信息",showClose:!0}),E(),!1;{let a;a=q.status?await(async()=>await Z.Register(x))():await(async()=>await Z.LoginIn(x))(),a||(E(),q.status=!1)}}))},ea=async()=>{var a;const e=await L();0===e.code&&((null==(a=e.data)?void 0:a.needInit)?(Z.NeedInit(),C.push({name:"Init"})):v({type:"info",message:"已配置数据库信息，无法初始化"}))};return(a,e)=>{const t=l("user"),s=B,f=y,h=w,v=k,C=A,L=b;return o(),i("div",z,[r("div",P,[r("div",K,[r("div",O,[F,r("p",G,n(a.$GIN_VUE_ADMIN.appName),1)]),c(L,{ref_key:"loginForm",ref:V,model:x,rules:N,onKeyup:_(aa,["enter"])},{default:p((()=>[c(h,{prop:"username"},{default:p((()=>[c(f,{modelValue:x.username,"onUpdate:modelValue":e[0]||(e[0]=a=>x.username=a),placeholder:"请输入用户名"},{suffix:p((()=>[r("span",M,[c(s,null,{default:p((()=>[c(t)])),_:1})])])),_:1},8,["modelValue"])])),_:1}),c(h,{prop:"password"},{default:p((()=>[c(f,{modelValue:x.password,"onUpdate:modelValue":e[1]||(e[1]=a=>x.password=a),type:"lock"===j.value?"password":"text",placeholder:"请输入密码"},{suffix:p((()=>[r("span",R,[c(s,null,{default:p((()=>[(o(),d(u(j.value),{onClick:D}))])),_:1})])])),_:1},8,["modelValue","type"])])),_:1}),c(h,{prop:"captcha"},{default:p((()=>[r("div",$,[c(f,{modelValue:x.captcha,"onUpdate:modelValue":e[2]||(e[2]=a=>x.captcha=a),placeholder:"请输入验证码",style:{width:"60%"}},null,8,["modelValue"]),r("div",H,[I.value?(o(),i("img",{key:0,src:I.value,alt:"请输入验证码",onClick:e[3]||(e[3]=a=>E())},null,8,J)):m("",!0)])])])),_:1}),c(h,null,{default:p((()=>[c(v,{type:"primary",style:{width:"38%"},size:"large",onClick:ea},{default:p((()=>[g("前往初始化")])),_:1}),c(v,{type:"primary",size:"large",style:{width:"38%","margin-left":"8%"},onClick:aa},{default:p((()=>[q.status?(o(),i("div",Q,"注 册")):m("",!0),q.status?m("",!0):(o(),i("div",S,"登 录"))])),_:1}),c(C,{modelValue:q.status,"onUpdate:modelValue":e[4]||(e[4]=a=>q.status=a),style:{width:"13%","margin-left":"3%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","onKeyup"])]),T,r("div",W,[X,r("div",Y,[c(U)])])])])}}}),[["__scopeId","data-v-9e73626c"]]);export{aa as default};
